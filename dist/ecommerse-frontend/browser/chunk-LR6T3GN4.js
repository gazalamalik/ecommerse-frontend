import{a as n,b as o,g as s,v as c}from"./chunk-6OIMN5L7.js";var u=class r{storageKey="cartItems";cartItems=new s(this.loadCartFromStorage());cartItems$=this.cartItems.asObservable();wishlistSubject=new s([]);wishlist$=this.wishlistSubject.asObservable();loadCartFromStorage(){return JSON.parse(localStorage.getItem(this.storageKey)||"[]")}saveCartToStorage(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}addToCart(e){let t=[...this.cartItems.value],a=t.findIndex(i=>i.id===e.id);if(a>-1){let i=t[a],m=e.quantity||1;i.quantity=(i.quantity||1)+m}else t.push(o(n({},e),{quantity:e.quantity||1}));this.cartItems.next(t),this.saveCartToStorage(t)}removeFromCart(e){let t=[...this.cartItems.value],a=t.findIndex(i=>i.id===e.id);a>-1&&(t[a].quantity-=1,t[a].quantity<=0&&t.splice(a,1)),this.cartItems.next(t),this.saveCartToStorage(t)}getQuantity(e){let t=this.cartItems.value.find(a=>a.id===e);return t?t.quantity:0}getCartCount(){return this.cartItems.value.reduce((e,t)=>e+t.quantity,0)}updateWishlist(e){this.wishlistSubject.next([...e])}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{u as a};
