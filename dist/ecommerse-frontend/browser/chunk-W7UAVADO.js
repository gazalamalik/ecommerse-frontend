import{a as $}from"./chunk-IAXLADBA.js";import{b as A,c as H,f as U,h as z,n as w}from"./chunk-JZXMG4AI.js";import{a as Q}from"./chunk-MZ4ZJALL.js";import{a as j}from"./chunk-LR6T3GN4.js";import{$ as v,B as u,C as g,Da as c,Ea as b,Fa as C,H as M,Ha as F,Ia as k,Ja as D,O as E,P as o,T as h,W as y,Xa as I,Ya as P,_,_a as S,bb as T,db as V,eb as N,gb as R,ha as l,hb as L,ia as n,ja as r,jb as W,ka as x,lb as B,qa as f,sa as m,ua as p}from"./chunk-6OIMN5L7.js";function K(s,t){if(s&1){let e=f();n(0,"div",6)(1,"input",7),m("change",function(){let d=u(e).$implicit,a=p();return g(a.toggleCategory(d))}),r(),n(2,"label",8),c(3),r()()}if(s&2){let e=t.$implicit,i=p();o(),l("value",e)("checked",i.isSelected(e))("id","cat-"+e),o(),l("for","cat-"+e),o(),b(e)}}function X(s,t){if(s&1){let e=f();n(0,"div",6)(1,"input",7),m("change",function(){let d=u(e).$implicit,a=p();return g(a.toggleBrand(d))}),r(),n(2,"label",8),c(3),r()()}if(s&2){let e=t.$implicit,i=p();o(),l("value",e)("checked",i.isSelected(e))("id","brand-"+e),o(),l("for","brand-"+e),o(),b(e)}}function Z(s,t){if(s&1){let e=f();n(0,"div",6)(1,"input",7),m("change",function(){let d=u(e).$implicit,a=p();return g(a.toggleColor(d))}),r(),n(2,"label",8),c(3),r()()}if(s&2){let e=t.$implicit,i=p();o(),l("value",e)("checked",i.isSelected(e))("id","color-"+e),o(),l("for","color-"+e),o(),b(e)}}function ee(s,t){if(s&1){let e=f();n(0,"div",6)(1,"input",9),m("change",function(){let d=u(e).$implicit,a=p();return g(a.toggleDiscount(d))}),r(),n(2,"label",8),c(3),r()()}if(s&2){let e=t.$implicit;o(),l("value",e)("id","discount-"+e),o(),l("for","discount-"+e),o(),C("",e,"% & above")}}var O=class s{categories=[];brands=[];colors=[];discounts=[];priceRange;selectedPrice;selectedCategories=[];categoryChange=new v;brandChange=new v;colorChange=new v;discountChange=new v;priceChange=new v;toggleCategory(t){this.categoryChange.emit(t)}toggleBrand(t){this.brandChange.emit(t)}toggleColor(t){this.colorChange.emit(t)}toggleDiscount(t){this.discountChange.emit(t)}ngOnChanges(){this.priceRange&&(this.selectedPrice=this.priceRange.max)}isSelected(t){return this.selectedCategories.includes(t)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=y({type:s,selectors:[["app-sidebar"]],inputs:{categories:"categories",brands:"brands",colors:"colors",discounts:"discounts",priceRange:"priceRange",selectedCategories:"selectedCategories"},outputs:{categoryChange:"categoryChange",brandChange:"brandChange",colorChange:"colorChange",discountChange:"discountChange",priceChange:"priceChange"},features:[M],decls:23,vars:8,consts:[[1,"filter-sidebar","p-3","shadow-sm","bg-white","rounded","sidebar-wrapper"],[1,"filter-group","mb-4"],[1,"filter-heading"],["class","form-check",4,"ngFor","ngForOf"],["type","range",1,"form-range",3,"ngModelChange","change","min","max","ngModel"],[1,"mt-2"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","value","checked","id"],[1,"form-check-label",3,"for"],["type","checkbox",1,"form-check-input",3,"change","value","id"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h6",2),c(3,"Category"),r(),_(4,K,4,5,"div",3),r(),n(5,"div",1)(6,"h6",2),c(7,"Brand"),r(),_(8,X,4,5,"div",3),r(),n(9,"div",1)(10,"h6",2),c(11,"Price"),r(),n(12,"input",4),D("ngModelChange",function(a){return k(i.selectedPrice,a)||(i.selectedPrice=a),a}),m("change",function(){return i.priceChange.emit(i.selectedPrice)}),r(),n(13,"p",5),c(14),r()(),n(15,"div",1)(16,"h6",2),c(17,"Color"),r(),_(18,Z,4,5,"div",3),r(),n(19,"div",1)(20,"h6",2),c(21,"Discount"),r(),_(22,ee,4,4,"div",3),r()()),e&2&&(o(4),l("ngForOf",i.categories),o(4),l("ngForOf",i.brands),o(4),l("min",i.priceRange.min)("max",i.priceRange.max),F("ngModel",i.selectedPrice),o(2),C("Up to \u20B9",i.selectedPrice),o(4),l("ngForOf",i.colors),o(4),l("ngForOf",i.discounts))},dependencies:[S,P,w,A,z,H,U],styles:[".sidebar-wrapper[_ngcontent-%COMP%]{position:sticky;top:80px;align-self:flex-start;height:fit-content}"]})};function te(s,t){if(s&1){let e=f();n(0,"div",19)(1,"div",20),x(2,"img",21),n(3,"div",22)(4,"div")(5,"h5",23),c(6),r(),n(7,"p",24),c(8),r()(),n(9,"div",25)(10,"i",26),m("click",function(){let d=u(e).$implicit,a=p();return g(a.handleWishlist(d))}),r(),n(11,"button",27),m("click",function(){let d=u(e).$implicit,a=p();return g(a.goToSummary(d))}),c(12,"View Details"),r()()()()()}if(s&2){let e=t.$implicit,i=p();o(2),l("src",e.imageUrl,E)("alt",e.name),o(4),b(e.name),o(2),C("\u20B9",e.price),o(2),l("ngClass",i.isInWishlist(e.id)?"bi-heart-fill text-danger":"bi-heart")}}function ie(s,t){if(s&1){let e=f();n(0,"li",28)(1,"button",29),m("click",function(){let d=u(e).$implicit,a=p();return g(a.changePage(d))}),c(2),r()()}if(s&2){let e=t.$implicit;o(2),C(" ",e," ")}}var q=class s{constructor(t,e,i,d,a,re,ne){this.route=t;this.cartService=e;this.http=i;this.homeService=d;this.authService=a;this.wishlistService=re;this.router=ne}categoryName="";category="";wishlist=[];allProducts=[];selectedCategories=[];selectedBrands=[];selectedColors=[];selectedDiscounts=[];priceRange={min:500,max:5e3};categories=[];brands=[];colors=[];discounts=[];defaultCategory="";filterCriteria={selectedCategories:[],selectedBrands:[],selectedColors:[],selectedDiscounts:[],maxPrice:5e3};currentPage=1;productsPerPage=45;categoryId;filteredProducts=[];ngOnInit(){this.route.paramMap.subscribe(t=>{let e=Number(t.get("categoryId")),i=this.route.snapshot.queryParamMap.get("name");isNaN(e)||(this.categoryId=e,this.categoryName=i||"",this.setCategoryName(i||""),this.loadProducts(e),this.loadFilterOptions(e))})}setCategoryName(t){this.categoryName=t}loadProducts(t){this.homeService.getProductData(t).subscribe({next:e=>{this.filteredProducts=e},error:e=>{console.error("Product fetch failed",e),this.filteredProducts=[]}})}loadFilterOptions(t){this.homeService.getFilterOptions(t).subscribe({next:e=>{this.categories=e.categories,this.brands=e.brands,this.colors=e.colors,this.discounts=e.discounts,this.priceRange=e.priceRange},error:e=>console.error("Filter fetch failed",e)})}getProductQuantity(t){return this.cartService.getQuantity(t.id)}getQuantity(t){return this.cartService.getQuantity(t)}handleWishlist(t){if(!this.authService.getCurrentUser()){this.router.navigate(["/auth"]);return}this.wishlistService.toggleWishlist(t)}goToSummary(t){let e=this.router.serializeUrl(this.router.createUrlTree(["/product-summary"],{queryParams:{data:JSON.stringify(t)}}));window.open(e,"_blank")}isInWishlist(t){return this.wishlistService.getWishlist().some(e=>e.id===t)}applyFilters(){}categoryChange(t){this.applyFilters()}brandChange(t){let e=this.selectedBrands.indexOf(t);e>-1?this.selectedBrands.splice(e,1):this.selectedBrands.push(t),this.applyFilters()}colorChange(t){let e=this.selectedColors.indexOf(t);e>-1?this.selectedColors.splice(e,1):this.selectedColors.push(t),this.applyFilters()}discountChange(t){let e=this.selectedDiscounts.indexOf(t);e>-1?this.selectedDiscounts.splice(e,1):this.selectedDiscounts.push(t),this.applyFilters()}priceChange(t){}get formattedCategory(){return this.category?this.category.charAt(0).toUpperCase()+this.category.slice(1).toLowerCase():""}get paginatedProducts(){let t=(this.currentPage-1)*this.productsPerPage;return this.filteredProducts.slice(t,t+this.productsPerPage)}changePage(t){this.currentPage=t}get totalPages(){let t=Math.ceil(this.filteredProducts.length/this.productsPerPage);return Array.from({length:t},(e,i)=>i+1)}static \u0275fac=function(e){return new(e||s)(h(N),h(j),h(T),h($),h(B),h(Q),h(R))};static \u0275cmp=y({type:s,selectors:[["app-product-list"]],decls:28,vars:11,consts:[[1,"container-fluid","mt-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/product"],["aria-current","page",1,"breadcrumb-item","active"],[1,"filter-heading"],[1,"text-muted","ms-2"],[1,"sidebar-divider"],[1,"row"],[1,"col-md-3","pe-3","border-end"],[3,"categoryChange","brandChange","colorChange","discountChange","priceChange","categories","selectedCategories","brands","colors","discounts","priceRange"],[1,"col-md-9"],[1,"row","g-4"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"pagination","justify-content-center"],["class","page-item",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card","h-100","shadow-sm","product-card"],[1,"card-img-top",3,"src","alt"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title"],[1,"fw-bold"],[1,"product-card","d-flex","justify-content-between","align-items-center"],[1,"bi",2,"font-size","1.5rem","cursor","pointer",3,"click","ngClass"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"page-item"],[1,"page-link",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),c(5,"Home"),r()(),n(6,"li",3)(7,"a",5),c(8,"Product"),r()(),n(9,"li",6),c(10),r()()(),n(11,"h5",7),c(12),n(13,"span",8),c(14),r()(),x(15,"br"),n(16,"h5",7),c(17,"Filters"),r(),x(18,"hr",9),n(19,"div",10)(20,"div",11)(21,"app-sidebar",12),m("categoryChange",function(a){return i.categoryChange(a)})("brandChange",function(a){return i.brandChange(a)})("colorChange",function(a){return i.colorChange(a)})("discountChange",function(a){return i.discountChange(a)})("priceChange",function(a){return i.priceChange(a)}),r()(),n(22,"div",13)(23,"div",14),_(24,te,13,5,"div",15),r(),n(25,"nav",16)(26,"ul",17),_(27,ie,3,1,"li",18),r()()()()()),e&2&&(o(10),b(i.categoryName),o(2),C("",i.categoryName," "),o(2),C("(",i.filteredProducts.length," items)"),o(7),l("categories",i.categories)("selectedCategories",i.selectedCategories)("brands",i.brands)("colors",i.colors)("discounts",i.discounts)("priceRange",i.priceRange),o(3),l("ngForOf",i.filteredProducts),o(3),l("ngForOf",i.totalPages))},dependencies:[S,I,P,w,V,O,W,L],styles:[".filter-sidebar[_ngcontent-%COMP%]{border-right:1px solid #eee}.product-card[_ngcontent-%COMP%]{transition:transform .25s ease-in-out,box-shadow .25s ease-in-out;border-radius:8px}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026}.card-img-top[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-radius:8px 8px 0 0}.product-card[_ngcontent-%COMP%]   i.bi[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:transform .25s ease-in-out,box-shadow .25s ease-in-out;cursor:pointer}.product-card[_ngcontent-%COMP%]   i.bi[_ngcontent-%COMP%]:hover, .product-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #00000026}.product-card[_ngcontent-%COMP%]   .d-flex.align-items-center.gap-2[_ngcontent-%COMP%]{gap:.5rem}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px}.btn-outline-primary[_ngcontent-%COMP%]{border:1px solid #ff4081;color:#ff4081;background-color:transparent;padding:.4rem 1rem;font-size:.85rem;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#ff4081;color:#fff;box-shadow:0 2px 6px #0000001a}"]})};export{q as ProductList};
